<ng-container *transloco="let t">
  <form [formGroup]="publicationsForm" (ngSubmit)="onSubmit()">
    <p-panel [header]="t('views.publications.new.title')">
      <ng-template pTemplate="content">
        <h4>Автори</h4>
        <div>
          <p>
            <p-chips
              formControlName="internalAuthors"
              [placeholder]="'Зареєстровані'"
            />
          </p>
          <p>
            <p-chips
              formControlName="externalAuthors"
              [placeholder]="'Незареєстровані'"
            />
          </p>
        </div>
        <h4>Інформація</h4>
        <div class="input-fields-wrapper">
          <p-floatLabel>
            <textarea
              pInputTextarea
              cols="60"
              rows="4"
              required
              id="dstuReference"
              name="dstuReference"
              formControlName="title"
              [ngClass]="{
                'ng-invalid':
                  publicationsForm.get('title')?.invalid &&
                  (publicationsForm.get('title')?.dirty ||
                    publicationsForm.get('title')?.touched),
                'ng-dirty':
                  publicationsForm.get('title')?.invalid &&
                  (publicationsForm.get('title')?.dirty ||
                    publicationsForm.get('title')?.touched)
              }"
            ></textarea>
            <label for="dstuReference">{{
              t("views.publications.new.dstuReference")
            }}</label>
          </p-floatLabel>
          <p-floatLabel>
            <p-dropdown
              required
              [(ngModel)]="selectedPublicationType"
              [options]="translatedPublicationTypes"
              class="p-inputtext-sm"
              id="publicationType"
              name="publicationType"
              formControlName="type"
              [loading]="translatedPublicationTypes.length < 1"
              [ngClass]="{
                'ng-invalid':
                  publicationsForm.get('type')?.invalid &&
                  (publicationsForm.get('type')?.dirty ||
                    publicationsForm.get('type')?.touched),
                'ng-dirty':
                  publicationsForm.get('type')?.invalid &&
                  (publicationsForm.get('type')?.dirty ||
                    publicationsForm.get('type')?.touched)
              }"
              ><ng-template pTemplate="selectedItem" let-item>
                {{ t("enums.PublicationTypes." + item.label) }} </ng-template
              ><ng-template pTemplate="item" let-item>
                {{ t("enums.PublicationTypes." + item.label) }}
              </ng-template></p-dropdown
            >
            <label for="publicationType">{{
              t("views.publications.new.publicationTypes")
            }}</label>
          </p-floatLabel>
          <p-floatLabel
            ><p-dropdown
              required
              [(ngModel)]="selectedPublicationCategory"
              [options]="translatedPublicationCategories"
              class="p-inputtext-sm"
              id="publicationCategory"
              name="publicationCategory"
              formControlName="category"
              [loading]="translatedPublicationCategories.length < 1"
              [ngClass]="{
                'ng-invalid':
                  publicationsForm.get('category')?.invalid &&
                  (publicationsForm.get('category')?.dirty ||
                    publicationsForm.get('category')?.touched),
                'ng-dirty':
                  publicationsForm.get('category')?.invalid &&
                  (publicationsForm.get('category')?.dirty ||
                    publicationsForm.get('category')?.touched)
              }"
              ><ng-template pTemplate="selectedItem" let-item>
                {{ t("enums.PublicationCategory." + item.label) }} </ng-template
              ><ng-template pTemplate="item" let-item>
                {{ t("enums.PublicationCategory." + item.label) }}
              </ng-template></p-dropdown
            >
            <label for="publicationCategory">{{
              t("views.publications.new.publicationCategory")
            }}</label></p-floatLabel
          >
        </div>

        <h4>{{ t("views.publications.new.properties") }}</h4>

        <div class="input-fields-wrapper vertical">
          <p-checkbox
            name="isInternational"
            [(ngModel)]="isInternational"
            [binary]="true"
            [label]="t('views.publications.new.isInternational')"
            id="isInternational"
            formControlName="isInternational"
          />

          <p-checkbox
            id="isWithStudent"
            name="isWithStudent"
            formControlName="isWithStudent"
            [(ngModel)]="isWithStudent"
            [binary]="true"
            [label]="t('views.publications.new.isWithStudent')"
          />
        </div>

        <div class="input-fields-wrapper">
          <p-floatLabel>
            <p-calendar
              class="p-inputtext-sm"
              id="publicationYear"
              name="publicationYear"
              formControlName="year"
              [(ngModel)]="publicationYear"
              [dateFormat]="'yy'"
              [iconDisplay]="'input'"
              [showIcon]="true"
              [readonlyInput]="true"
              [showButtonBar]="true"
              view="year"
            />
            <label for="publicationYear">{{
              t("views.publications.new.publicationYear")
            }}</label> </p-floatLabel
          ><p-floatLabel
            ><input
              class="p-inputtext-sm"
              pInputText
              type="text"
              [(ngModel)]="totalPages"
              id="totalPages"
              name="totalPages"
              formControlName="pages"
            /><label for="totalPages">{{
              t("views.publications.new.totalPages")
            }}</label></p-floatLabel
          >

          <p-floatLabel
            ><input
              class="p-inputtext-sm"
              pInputText
              type="text"
              [(ngModel)]="authorPages"
              id="authorPages"
              name="authorPages"
              formControlName="pagesAuthor"
            /><label for="authorPages">{{
              t("views.publications.new.authorPages")
            }}</label></p-floatLabel
          >
        </div>
        <div
          class="input-fields-wrapper"
          *ngIf="selectedPublicationType === publicationTypes.Theses"
        >
          <p-floatLabel
            ><input
              class="p-inputtext-sm"
              pInputText
              type="text"
              id="pageFirst"
              name="pageFirst"
              formControlName="pageFirst"
              [(ngModel)]="pageFirst"
            /><label for="pageFirst">{{
              t("views.publications.new.pageFirst")
            }}</label></p-floatLabel
          >
          <p-floatLabel
            ><input
              class="p-inputtext-sm"
              pInputText
              type="text"
              id="pageLast"
              name="pageLast"
              formControlName="pageLast"
              [(ngModel)]="pageLast"
            /><label for="pageLast">{{
              t("views.publications.new.pageLast")
            }}</label></p-floatLabel
          >

          <p-floatLabel>
            <input
              class="p-inputtext-sm"
              pInputText
              type="text"
              [(ngModel)]="conferenceName"
              id="conferenceName"
              name="conferenceName"
              formControlName="conferenceName"
            />
            <label for="conferenceName">{{
              t("views.publications.new.conferenceName")
            }}</label>
          </p-floatLabel>

          <p-floatLabel
            ><p-calendar
              class="p-inputtext-sm"
              [(ngModel)]="conferenceDates"
              selectionMode="range"
              [dateFormat]="'dd.mm.yy'"
              [iconDisplay]="'input'"
              [showIcon]="true"
              [readonlyInput]="true"
              [showButtonBar]="true"
              id="conferenceDates"
              name="conferenceDates"
              formControlName="conferenceDates"
              [firstDayOfWeek]="1"
            /><label>{{
              t("views.publications.new.conferenceDates")
            }}</label></p-floatLabel
          >

          <p-floatLabel
            ><input
              class="p-inputtext-sm"
              pInputText
              type="text"
              id="conferenceCity"
              name="conferenceCity"
              formControlName="conferenceCity"
              [(ngModel)]="conferenceCity"
            /><label for="conferenceCity">{{
              t("views.publications.new.conferenceCity")
            }}</label></p-floatLabel
          >
        </div>
        <div
          class="input-fields-wrapper"
          *ngIf="
            selectedPublicationType === publicationTypes.Article ||
            selectedPublicationType === publicationTypes.MethodicalManual ||
            selectedPublicationType === publicationTypes.StudyMethodicalManual
          "
        >
          <p-floatLabel
            ><input
              class="p-inputtext-sm"
              pInputText
              type="text"
              id="magazineName"
              name="magazineName"
              formControlName="magazineName"
              [(ngModel)]="magazineName"
            /><label for="magazineName">{{
              t("views.publications.new.magazineName")
            }}</label></p-floatLabel
          >
          <p-floatLabel
            ><input
              class="p-inputtext-sm"
              pInputText
              type="text"
              [(ngModel)]="magazineIssue"
              id="magazineIssue"
              name="magazineIssue"
              formControlName="magazineIssue"
            /><label for="magazineIssue">{{
              t("views.publications.new.magazineIssue")
            }}</label></p-floatLabel
          >
          <p-floatLabel
            ><input
              class="p-inputtext-sm"
              pInputText
              type="text"
              [(ngModel)]="magazineNumber"
              id="magazineNumber"
              name="magazineNumber"
              formControlName="magazineNumber"
            />
            <label>{{
              t("views.publications.new.magazineNumber")
            }}</label></p-floatLabel
          >

          <p-floatLabel
            ><input
              class="p-inputtext-sm"
              pInputText
              type="text"
              id="printingInfo"
              name="printingInfo"
              formControlName="publishingName"
              [(ngModel)]="printingInfo"
            /><label for="printingInfo">{{
              t("views.publications.new.printingInfo")
            }}</label></p-floatLabel
          >
        </div>
        <h4>{{ t("views.publications.new.metadata") }}</h4>
        <div class="input-fields-wrapper">
          <p-floatLabel
            ><input
              class="p-inputtext-sm"
              pInputText
              type="text"
              id="isbn"
              name="isbn"
              formControlName="isbn"
              [(ngModel)]="isbn"
            /><label for="isbn">ISBN</label></p-floatLabel
          >
          <p-floatLabel>
            <input
              class="p-inputtext-sm"
              pInputText
              type="text"
              id="issn"
              name="issn"
              formControlName="issn"
              [(ngModel)]="issn"
            />
            <label for="issn">ISSN</label>
          </p-floatLabel>
          <p-floatLabel>
            <input
              class="p-inputtext-sm"
              pInputText
              type="text"
              id="doi"
              name="doi"
              formControlName="doi"
              [(ngModel)]="doi"
            />
            <label for="doi">DOI</label>
          </p-floatLabel>
          <p-floatLabel>
            <input
              class="p-inputtext-sm"
              pInputText
              type="text"
              id="url"
              name="url"
              formControlName="url"
              [(ngModel)]="url"
            />
            <label for="url">URL</label>
          </p-floatLabel>
        </div></ng-template
      >
      <ng-template pTemplate="footer"
        ><button
          type="submit"
          pButton
          [label]="'Створити'"
          [disabled]="publicationsForm.invalid && publicationsForm.touched"
        ></button
      ></ng-template>
    </p-panel>
    <br />
    <p-panel [header]="t('views.publications.new.usefullLinks')">
      <ul>
        <li>
          <a
            target="_blank"
            href="https://www.grafiati.com/uk/blogs/dstu-8302-2015-referencing-generator/"
            >Як оформити цитування згідно ДСТУ 8302:2015 «Інформація та
            документація. Бібліографічне посилання. Загальні положення та
            правила складання»?</a
          >
        </li>
        <li>
          <a
            target="_blank"
            href="https://nauka.gov.ua/information/naukovi-publikatsii-v-zhurnalakh-iaki-vkhodiat-do-katehorii-a-b/"
            >Як визначити категорію публікації (А,Б,В)?</a
          >
        </li>
      </ul>
    </p-panel>
  </form>
</ng-container>
